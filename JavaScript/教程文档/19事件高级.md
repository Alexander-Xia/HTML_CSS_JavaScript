### 技术交流QQ群:1027579432，欢迎你的加入！

#### 1.注册事件(绑定事件)
- **注册事件概述**：给元素添加事件,称为**注册事件**或**绑定事件**。
- 注册事件有两种方法：
    - 传统方式
    - 方法监听注册方式
- **传统方式**：利用on开头的事件onclick，如下例所示：
    - 特点：注册事件的**唯一性**；
    - 同一个元素同一个事件只能设置一个处理函数，最后注册的处理函数将会覆盖前面注册的处理函数；
    ```
    <button>传统注册事件方式</button>
    <button>方法监听注册事件</button>
    <script>
        var btns = document.querySelectorAll('button');
        btns[0].onclick = function() {
            alert('hi~');
        }     
        btns[0].onclick = function() {
            alert('hi old are you?');
        } 
    </script>
    ```
- **方法监听注册方式**：w3c标准推荐方式；addEventListener()它是一个方法；IE9之前的IE不支持此方法，可使用attachEvent()代替。
    - 特点：**同一个元素同一个事件可以注册多个监听器**；
    - 按注册顺序依次执行。
    - **addEventListener()事件监听方式**：
        ```
        eventTarget.addEventListener(type, listener[, useCapture])
        ```
        - eventTarget.addEventListener()方法将指定的监听器注册到eventTarget(目标对象)上，当该对象触发指定的事件时，就会执行事件处理函数。该方法接收三个参数：
            - type: **事件类型字符串**，如click、mouseover、**注意这里不要带on**；
            - listener: **事件处理函数**，事件发生时，会调用该监听函数；
            - useCapture: 可选参数，是一个布尔值，默认为false，学完DOM事件流后再进一步学习。
        ```
        <button>传统注册事件方式</button>
        <button>方法监听注册事件</button>
        <script>
            // 事件监听方式注册事件
            btns[1].addEventListener('click', function() {
                alert('22');
            })
            btns[1].addEventListener('click', function() {
                alert('666');
            })
        </script>
        ```
    - **attachEvent()事件监听方式**：该方法了解即可！**注意：IE8及早期版本支持**。
        ```
        eventTarget.attachEvent(eventNameWithOn, callback)
        ```
        - eventTarget.attachEvent()方法将指定的监听器注册到eventTarget(目标对象)上，当该对象触发指定的事件时，指定的回调函数就会被执行。该方法接收两个参数：
            - eventNameWithOn：事件类型字符串，如onclick、onmouseover,**这里要带on**；
            - callback：事件处理函数，当目标触发事件时回调函数被调用；
            ```
            <button>传统注册事件方式</button>
            <button>方法监听注册事件</button>
            <button>IE9 attachEvent</button>
            <script>
            // attachEvent IE9以前的版本支持
            btns[2].attachEvent('onclick', function(){
                alert('IE9');
            })
            </script>
            ```
- **注册事件兼容性解决方案**：处理兼容性的原则是先照顾大多数浏览器，再处理特殊浏览器。
    ```
    function addEventListener(element, eventName, fn) {
        // 判断当前浏览器是否支持addEventListener方法
        if(element.addEventListener){
            element.addEventListener(eventName, fn);
        }else if(element.attachEvent){
            element.attachEvent('on' + eventName, fn);
        }else {
            // 相当于element.onclick = fn;
            element['on' + eventName] = fn;
        }
    }
    ```

#### 2.删除事件(解绑事件)
- **删除事件的方式**：
    - **传统注册方式**：eventTarget.onclick = null;
    ```
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <script>
        var divs = document.querySelectorAll('div');
        divs[0].onclick = function() {
            alert('11');
            // 传统方式删除事件
            divs[0].onclick = null;
        }
    </script>
    ```
    - **方法监听注册方式**：eventTarget.removeEventListener(type, listener[, useCapture])与eventTarget.detachEvent(eventNameWithOn, callback);
    ```
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <script>
        // 方法监听注册方式删除事件
        divs[1].addEventListener('click', fn); // 里面的fn不需要调用加小括号
        function fn() {
            alert('666');
            divs[1].removeEventListener('click', fn);
        }

        divs[2].attachEvent('onclick', fn1);
        function fn1() {
            alert('888');
            divs[2].detachEvent('onclick', fn1);
        }
    </script>
    ```
    - **删除事件兼容性解决方案**：
    ```
    function removeEventListener(element, eventName, fn){
        // 判断当前浏览器是否支持removeEventListener方法
        if(element.removeEventListener){
            element.removeEventListener(eventName, fn);
        }else if(element.detachEvent){
            element.detachEvent('on' + eventName, fn);
        }else{
            element['on' + eventName] = null;
        }
    }
    ```

#### 3.DOM事件流
- **事件流**描述的是从页面中接收事件的顺序。
- **事件**发生时会在元素节点之间按照特定的顺序传播，这个**传播过程即DOM事件流**。例如，给一个div注册了一个点击事件：
![DOM事件流.png](https://upload-images.jianshu.io/upload_images/13407176-5d96593ef34e918b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
- **DOM事件流分为三个阶段**：
    - 1.捕获阶段(事件捕获)：网景最早提出，由DOM最顶层节点开始，然后逐级向下传播到最具体的元素接收的过程。
    - 2.当前目标阶段
    - 3.冒泡阶段(事件冒泡):IE最早提出，事件开始时由最具体的元素接收，然后逐级向上传播到DOM最顶层节点的过程。
- **DOM事件流形象化理解**：向水里扔一块石头，首先它会有一个下降的过程，这个过程可以理解为从最顶层向事件发生的最具体元素(目标点)的捕获过程；之后会产生泡泡，会在最低点(最具体元素)之后漂浮到水面上，这个过程相当于事件冒泡。
![DOM事件流.png](https://upload-images.jianshu.io/upload_images/13407176-992c0f905388b121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)